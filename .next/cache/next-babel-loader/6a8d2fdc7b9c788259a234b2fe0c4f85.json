{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { withRouter } from \"next/router\";\nimport Router from \"next/router\";\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport { useState, useEffect } from \"react\";\nconst posts = withRouter(({\n  router: {\n    query: {\n      name,\n      id,\n      firstname,\n      mytitle,\n      author,\n      userEmail\n    }\n  },\n  books\n}) => {\n  console.log('useremail is', userEmail); // User chooses to view all available books\n\n  const viewAll = () => {\n    Router.push({\n      pathname: '/booklist',\n      query: {\n        name: name,\n        id: id,\n        firstname: firstname,\n        mytitle: '',\n        author: '',\n        userEmail: userEmail\n      }\n    }, '/booklist');\n  }; // Redirect to myprofile\n\n\n  const myProfile = () => {\n    Router.push({\n      pathname: '/myprofile',\n      query: {\n        mytitle: '',\n        author: '',\n        name: name,\n        id: id,\n        firstname: firstname,\n        userEmail: userEmail\n      }\n    }, '/myprofile');\n  }; // Redirect to new\n\n\n  const myBooks = () => {\n    Router.push({\n      pathname: '/new',\n      query: {\n        id: id,\n        name: name,\n        firstname: firstname,\n        userEmail: userEmail\n      }\n    }, '/new');\n  }; // Redirect to posts\n\n\n  const Search = () => {\n    Router.push({\n      pathname: '/posts',\n      query: {\n        id: id,\n        name: name,\n        firstname: firstname,\n        userEmail: userEmail\n      }\n    }, '/search');\n  }; // Redirect to contact page\n  // Information transferred are user, book and bookowner information\n\n\n  const Contact = (bookID, bookOwnerName, bookTitle, bookOwnerID, ownerEmail) => {\n    var splitFullName = bookOwnerName.split(\" \");\n    var ownerFirstName = splitFullName[0];\n    var ownerEmail = ownerEmail;\n    console.log(ownerEmail);\n    Router.push({\n      pathname: '/contact',\n      query: {\n        //User information\n        id: id,\n        name: name,\n        firstname: firstname,\n        //Book information\n        bookID: bookID,\n        bookTitle: bookTitle,\n        //book owner information\n        bookOwnerName: bookOwnerName,\n        ownerFirstName: ownerFirstName,\n        bookOwnerID: bookOwnerID,\n        userEmail: userEmail,\n        ownerEmail: ownerEmail\n      }\n    }, '/contact');\n  };\n\n  const aboutUs = () => {\n    Router.push({\n      pathname: '/aboutus',\n      query: {\n        id: id,\n        name: name,\n        firstname: firstname,\n        userEmail: userEmail\n      }\n    }, '/aboutus');\n  };\n\n  return __jsx(\"div\", {\n    className: \"booklist-page\"\n  }, __jsx(Head, null, __jsx(\"title\", null, \"Books available, MacEwan Book Trade\")), __jsx(\"div\", {\n    className: \"book-greeting-fixed\",\n    style: {\n      padding: '5px'\n    }\n  }, __jsx(\"div\", {\n    className: \"greeting-text\"\n  }, __jsx(\"div\", {\n    className: \"icon-box\"\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"img\", {\n    src: \"/icons/sign-out.png\",\n    alt: \"my image\",\n    className: \"my-icon\"\n  })), __jsx(\"img\", {\n    onClick: aboutUs,\n    src: \"/icons/info.svg\",\n    alt: \"About us\",\n    className: \"my-icon btn-aboutUs\"\n  }), __jsx(\"div\", {\n    className: \"my-icon-end\"\n  }, __jsx(\"img\", {\n    src: \"/icons/four-square.png\",\n    alt: \"my books\",\n    className: \"my-icon\",\n    onClick: myProfile\n  }), __jsx(\"img\", {\n    src: \"/icons/plus.png\",\n    alt: \"Add book\",\n    className: \"my-icon\",\n    onClick: myBooks\n  }), __jsx(\"img\", {\n    src: \"/icons/search.png\",\n    alt: \"Search\",\n    className: \"my-icon\",\n    onClick: Search\n  }))), __jsx(\"p\", {\n    className: \"icon-box-text\"\n  }, \"This is a collection of all the books matching your search\", __jsx(\"br\", null), \"We currently have \", books.length, \" available\"))), __jsx(\"div\", {\n    className: \"book-list\"\n  }, books.map(book => {\n    //processing image data\n    var imageData;\n\n    if (book.imageFront) {\n      imageData = book.imageFront.data;\n    } else {\n      //using dummy data if image data is not present\n      imageData = 'eweffwf';\n    }\n\n    return __jsx(\"div\", {\n      key: book._id,\n      className: \"book-item\"\n    }, __jsx(\"div\", {\n      className: \"item-section1\"\n    }, __jsx(\"img\", {\n      src: imageData,\n      className: \"item-pic\"\n    })), __jsx(\"div\", {\n      className: \"item-section2\"\n    }, __jsx(\"p\", {\n      style: {\n        color: 'rgb(128,0,0)'\n      }\n    }, __jsx(\"b\", null, book.title)), __jsx(\"p\", null, book.author), __jsx(\"p\", {\n      style: {\n        fontSize: '18px',\n        color: 'rgb(107, 177, 2)'\n      }\n    }, \"$\", book.price), __jsx(\"p\", null, book.userEmail), __jsx(\"a\", {\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: () => Contact(book._id, book.ownerName, book.title, book.ownerID, book.userEmail)\n    }, __jsx(\"b\", null, \"Contact \", book.ownerName))));\n  })));\n}); // Get content from database\n\nposts.getInitialProps = async ctx => {\n  const res = await fetch('https://usedbooksexchange.com/api/books', {\n    //const res = await fetch('http://localhost:3000/api/books', {\n    headers: {\n      title: ctx.query.mytitle,\n      author: ctx.query.author\n    }\n  });\n  const {\n    data\n  } = await res.json();\n  return {\n    books: data\n  };\n};\n\nexport default posts;","map":null,"metadata":{},"sourceType":"module"}